# PAYMENT SERVICE API ENDPOINTS

## HEALTH CHECK
GET /health
# Check service health
curl -X GET http://localhost:8003/health

## PAYMENT ENDPOINTS
POST /api/v1/payments                         # Create a new payment 
# Create a new payment
curl -X POST http://localhost:8003/api/v1/payments \
  -H "Content-Type: application/json" \
  -d '{
    "member_id": 103,
    "amount": 50.00,
    "payment_date": "2023-07-15T14:30:00Z",
    "payment_method": "cash",
    "payment_status": "completed",
    "description": "Personal training session",
    "payment_type_id": 2
  }'

GET /api/v1/payments                          # List all payments 
# List all payments
curl -X GET http://localhost:8003/api/v1/payments

# List payments with pagination
curl -X GET "http://localhost:8003/api/v1/payments?page=1&pageSize=10"

GET /api/v1/payments/{id}                     # Get a specific payment
# Get a specific payment
curl -X GET http://localhost:8003/api/v1/payments/1

PUT /api/v1/payments/{id}                     # Update a payment 
# Update a payment
curl -X PUT http://localhost:8003/api/v1/payments/11 \
  -H "Content-Type: application/json" \
  -d '{
    "member_id": 103,
    "amount": 55.00,
    "payment_date": "2023-07-15T14:30:00Z",
    "payment_method": "credit_card",
    "payment_status": "completed",
    "description": "Updated: Personal training session plus equipment rental",
    "payment_type_id": 2
  }'

DELETE /api/v1/payments/{id}                  # Delete a payment
# Delete a payment
curl -X DELETE http://localhost:8003/api/v1/payments/11

GET /api/v1/payments/member/{memberID}        # List payments by member
# List payments by member
curl -X GET http://localhost:8003/api/v1/payments/member/101

GET /api/v1/payments/status/{status}          # List payments by status
# List payments by status
curl -X GET http://localhost:8003/api/v1/payments/status/completed

GET /api/v1/payments/method/{method}          # List payments by method
# List payments by method
curl -X GET http://localhost:8003/api/v1/payments/method/credit_card

GET /api/v1/payments/type/{typeID}            # List payments by type
# List payments by type
curl -X GET http://localhost:8003/api/v1/payments/type/1

GET /api/v1/payments/statistics               # Get payment statistics
# Get payment statistics
curl -X GET http://localhost:8003/api/v1/payments/statistics

# Get payment statistics with filters
curl -X GET "http://localhost:8003/api/v1/payments/statistics?memberID=101&startDate=2023-01-01&endDate=2023-12-31"

## PAYMENT TYPE ENDPOINTS
POST /api/v1/payment-types                    # Create a new payment type
# Create a new payment type
curl -X POST http://localhost:8003/api/v1/payment-types \
  -H "Content-Type: application/json" \
  -d '{
    "type_name": "Event Fee",
    "description": "Payment for special events and workshops",
    "is_active": true
  }'

GET /api/v1/payment-types                     # Get all payment types
# Get all payment types
curl -X GET http://localhost:8003/api/v1/payment-types

# Get active payment types only
curl -X GET "http://localhost:8003/api/v1/payment-types?active=true"

GET /api/v1/payment-types/{id}                # Get a specific payment type
# Get a specific payment type
curl -X GET http://localhost:8003/api/v1/payment-types/1

PUT /api/v1/payment-types/{id}                # Update a payment type
# Update a payment type
curl -X PUT http://localhost:8003/api/v1/payment-types/6 \
  -H "Content-Type: application/json" \
  -d '{
    "type_name": "Event Fee",
    "description": "Payment for special events, workshops, and seminars",
    "is_active": true
  }'

DELETE /api/v1/payment-types/{id}             # Delete a payment type
# Delete a payment type
curl -X DELETE http://localhost:8003/api/v1/payment-types/6

PUT /api/v1/payment-types/{id}/status         # Toggle payment type status
# Toggle payment type status
curl -X PUT http://localhost:8003/api/v1/payment-types/5/status \
  -H "Content-Type: application/json" \
  -d '{
    "is_active": false
  }'

## TRANSACTION ENDPOINTS
POST /api/v1/transactions                     # Create a new transaction
# Create a new transaction
curl -X POST http://localhost:8003/api/v1/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "payment_id": 11,
    "transaction_date": "2023-07-15T14:35:00Z",
    "transaction_status": "success",
    "transaction_reference": "TXN987654321",
    "gateway_response": "{\"processor\":\"Stripe\",\"status\":\"succeeded\",\"auth_code\":\"AUTH999\"}"
  }'

GET /api/v1/transactions                      # Get all transactions
# Get all transactions
curl -X GET http://localhost:8003/api/v1/transactions

# Get transactions with pagination
curl -X GET "http://localhost:8003/api/v1/transactions?page=1&pageSize=10"

GET /api/v1/transactions/{id}                 # Get a specific transaction
# Get a specific transaction
curl -X GET http://localhost:8003/api/v1/transactions/1

PUT /api/v1/transactions/{id}                 # Update a transaction
# Update a transaction
curl -X PUT http://localhost:8003/api/v1/transactions/1 \
  -H "Content-Type: application/json" \
  -d '{
    "payment_id": 1,
    "transaction_date": "2023-07-01T10:01:15Z",
    "transaction_status": "success",
    "transaction_reference": "TXN123456789-A",
    "gateway_response": "{\"processor\":\"Stripe\",\"status\":\"succeeded\",\"auth_code\":\"AUTH123-A\"}"
  }'

DELETE /api/v1/transactions/{id}              # Delete a transaction
# Delete a transaction
curl -X DELETE http://localhost:8003/api/v1/transactions/11

GET /api/v1/transactions/payment/{paymentID}  # List transactions by payment
# List transactions by payment
curl -X GET http://localhost:8003/api/v1/transactions/payment/1

GET /api/v1/transactions/status/{status}      # List transactions by status
# List transactions by status
curl -X GET http://localhost:8003/api/v1/transactions/status/success

POST /api/v1/transactions/process             # Process a payment
# Process a payment
curl -X POST http://localhost:8003/api/v1/transactions/process \
  -H "Content-Type: application/json" \
  -d '{
    "payment_id": 12,
    "transaction_status": "success",
    "transaction_reference": "TXN-PROCESS-001",
    "gateway_response": "{\"processor\":\"Stripe\",\"status\":\"succeeded\",\"auth_code\":\"AUTH-PROC-001\"}"
  }'

## HEALTH AND MONITORING ENDPOINTS

### Health Check
GET /health
# Check service health
curl -X GET http://localhost:8003/health

### Database Status
GET /api/v1/admin/db-status  (Requires admin privileges)
# Check database connection status
curl -X GET http://localhost:8003/api/v1/admin/db-status -H "Authorization: Bearer {admin_token}"

## TESTING EXAMPLES

### Complete Flow Example
# 1. Create a payment
curl -X POST http://localhost:8003/api/v1/payments \
  -H "Content-Type: application/json" \
  -d '{
    "member_id": 103,
    "amount": 50.00,
    "payment_method": "credit_card",
    "payment_status": "pending",
    "description": "Personal training session",
    "payment_type_id": 2
  }'

# 2. Process the payment (create a transaction)
curl -X POST http://localhost:8003/api/v1/transactions/process \
  -H "Content-Type: application/json" \
  -d '{
    "payment_id": 12,
    "transaction_status": "success",
    "transaction_reference": "TXN-FLOW-001",
    "gateway_response": "{\"processor\":\"Stripe\",\"status\":\"succeeded\",\"auth_code\":\"AUTH-FLOW-001\"}"
  }'

# 3. Verify the payment status is updated to completed
curl -X GET http://localhost:8003/api/v1/payments/12
